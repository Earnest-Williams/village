# recipes.yaml
# VILLAGE v3.5 compliant recipe schema (Section 16.3) :contentReference[oaicite:13]{index=13}
schema_version: "3.5"
file: "recipes.yaml"

recipes:
  # --- Food chain bootstrap (explicitly required to exist in data) :contentReference[oaicite:14]{index=14}

  - id: mill_grain_to_flour
    facility: grain_mill
    inputs:
      grain: 5.0
    outputs:
      flour: 4.0
    byproducts:
      bran: 1.0
    cycle_time_minutes: 60
    workers_required: 1
    skill_used: milling
    min_skill: 0
    waste_chance: 0.02

  - id: bake_bread
    facility: bakery
    inputs:
      flour: 4.0
      water: 2.0
    outputs:
      bread: 5.0
    byproducts: {}
    cycle_time_minutes: 90
    workers_required: 1
    skill_used: baking
    min_skill: 10
    waste_chance: 0.05

  - id: brew_ale
    facility: brewery
    inputs:
      grain: 3.0
      water: 10.0
    outputs:
      ale: 10.0
    byproducts: {}
    cycle_time_minutes: 180
    workers_required: 1
    skill_used: brewing
    min_skill: 10
    waste_chance: 0.06

  - id: chop_logs_to_firewood
    facility: woodworker_hut
    inputs:
      logs: 10.0
    outputs:
      firewood: 40.0
    byproducts: {}
    cycle_time_minutes: 90
    workers_required: 1
    skill_used: logging
    min_skill: 0
    waste_chance: 0.03

  # --- Fuel + metal chain

  - id: make_charcoal
    facility: charcoal_pit
    inputs:
      firewood: 30.0
    outputs:
      charcoal: 15.0
    byproducts: {}
    cycle_time_minutes: 240
    workers_required: 1
    skill_used: smelting
    min_skill: 0
    waste_chance: 0.08

  - id: smelt_iron_ore
    facility: smelter
    inputs:
      iron_ore: 5.0
      charcoal: 2.0
    outputs:
      iron_ingot: 4.0
    byproducts:
      slag: 1.0
    cycle_time_minutes: 120
    workers_required: 1
    skill_used: smelting
    min_skill: 15
    waste_chance: 0.07

  - id: forge_nails
    facility: blacksmith
    inputs:
      iron_ingot: 1.0
    outputs:
      nails: 50.0
    byproducts: {}
    cycle_time_minutes: 60
    workers_required: 1
    skill_used: smithing
    min_skill: 20
    waste_chance: 0.06

  - id: forge_tool_set
    facility: blacksmith
    inputs:
      iron_ingot: 3.0
      lumber: 1.0
    outputs:
      tool_set: 1.0
    byproducts: {}
    cycle_time_minutes: 180
    workers_required: 1
    skill_used: smithing
    min_skill: 35
    waste_chance: 0.10

  # --- Wood + building materials

  - id: saw_logs_to_lumber
    facility: sawpit
    inputs:
      logs: 10.0
    outputs:
      lumber: 8.0
    byproducts:
      sawdust: 2.0
    cycle_time_minutes: 120
    workers_required: 2
    skill_used: carpentry
    min_skill: 10
    waste_chance: 0.05

  - id: shape_stone_blocks
    facility: mason_yard
    inputs:
      stone: 20.0
    outputs:
      stone_blocks: 10.0
    byproducts:
      rubble: 10.0
    cycle_time_minutes: 180
    workers_required: 2
    skill_used: masonry
    min_skill: 10
    waste_chance: 0.04

  - id: fire_bricks
    facility: kiln
    inputs:
      clay: 20.0
      firewood: 10.0
    outputs:
      bricks: 30.0
    byproducts: {}
    cycle_time_minutes: 240
    workers_required: 1
    skill_used: masonry
    min_skill: 15
    waste_chance: 0.06

  # --- Textiles + leather

  - id: spin_fiber_to_thread
    facility: spinning_wheel
    inputs:
      fiber: 10.0
    outputs:
      thread: 10.0
    byproducts: {}
    cycle_time_minutes: 90
    workers_required: 1
    skill_used: weaving
    min_skill: 0
    waste_chance: 0.03

  - id: weave_cloth
    facility: loom
    inputs:
      thread: 10.0
    outputs:
      cloth: 5.0
    byproducts: {}
    cycle_time_minutes: 180
    workers_required: 1
    skill_used: weaving
    min_skill: 15
    waste_chance: 0.05

  - id: tan_hides_to_leather
    facility: tannery
    inputs:
      hides: 5.0
      salt: 2.0
      water: 5.0
    outputs:
      leather: 4.0
    byproducts: {}
    cycle_time_minutes: 240
    workers_required: 1
    skill_used: tanning
    min_skill: 15
    waste_chance: 0.07

  - id: sew_garments
    facility: tailor_shop
    inputs:
      cloth: 5.0
      thread: 2.0
    outputs:
      clothes: 2.0
    byproducts: {}
    cycle_time_minutes: 180
    workers_required: 1
    skill_used: tailoring
    min_skill: 20
    waste_chance: 0.06

  # --- Preservation (optional but content-complete for Phase 1)

  - id: smoke_meat
    facility: smokehouse
    inputs:
      meat: 10.0
      firewood: 5.0
      salt: 1.0
    outputs:
      preserved_meat: 8.0
    byproducts: {}
    cycle_time_minutes: 240
    workers_required: 1
    skill_used: cooking
    min_skill: 15
    waste_chance: 0.06

  - id: dry_fish
    facility: smokehouse
    inputs:
      fish: 10.0
      firewood: 3.0
      salt: 1.0
    outputs:
      dried_fish: 8.0
    byproducts: {}
    cycle_time_minutes: 240
    workers_required: 1
    skill_used: cooking
    min_skill: 15
    waste_chance: 0.06

  # --- Herbalism/medicine (optional but completes the skill loop)

  - id: grind_herbs
    facility: herb_table
    inputs:
      herbs: 5.0
    outputs:
      ground_herbs: 5.0
    byproducts: {}
    cycle_time_minutes: 60
    workers_required: 1
    skill_used: herbalism
    min_skill: 0
    waste_chance: 0.03

  - id: brew_remedy
    facility: apothecary
    inputs:
      ground_herbs: 2.0
      water: 2.0
      alcohol: 0.5
    outputs:
      remedy: 2.0
    byproducts: {}
    cycle_time_minutes: 120
    workers_required: 1
    skill_used: medicine
    min_skill: 20
    waste_chance: 0.08
