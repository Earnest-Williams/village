meta:
  schema: equipment
  version: 1
  id_namespace: medieval_village

# =============================================================================
# EQUIPMENT
# =============================================================================
# Movable durable items with durability, repairs, and special capabilities.
# Equipment enables or boosts specific operations.
#
# Schema fields:
# - kind: equipment
# - build_time_days: time to construct/craft
# - inputs: resources required to build
# - durability_uses: number of uses before breaking (can be very high for near-permanent items)
# - repair_cost: resources needed to repair (optional)
# - maintenance_per_season: recurring costs for upkeep (optional)
# - effects: bonuses and capabilities provided by this equipment
#
# -----------------------------------------------------------------------------
# Effects Semantics & Stacking Rules
# -----------------------------------------------------------------------------
# Effects are data and must be machine-readable. Rules:
#
# 1) *_bonus fields are DECIMAL additive bonuses applied to a base.
#    Example: gathering_radius_bonus: 0.50 means +50%.
#    Stacking rule: sum bonuses from all applicable sources, then apply once:
#      final = base * (1 + sum(bonuses))
#
# 2) *_multiplier fields are multiplicative modifiers to a base.
#    Stacking rule: multiply all multipliers:
#      final = base * product(multipliers)
#
# 3) recipe_speed_bonus values are DECIMAL bonuses to throughput (not time).
#    Example: +100% speed is stored as 1.00.
#    Default interpretation:
#      effective_cycle_time = base_time / (1 + sum(recipe_speed_bonus))
#    (This keeps "speed bonuses" intuitive and avoids negative times.)
#
# 4) When multiple effects of the same exact key apply, use the stacking rule above.
#    When different keys conflict, prefer explicit resolution in code.
# =============================================================================

equipment:

  wagon:
    kind: equipment
    build_time_days: 8
    inputs: { lumber: 20, iron_ingots: 5, nails: 10, leather: 3 }
    durability_uses: 500
    repair_cost: { lumber: 5, iron_ingots: 1, nails: 2 }
    effects:
      gathering_radius_bonus: 0.50
      enables_trade_caravans: true
      carry_capacity_bonus: 2.00

  plow_and_ox:
    kind: equipment
    build_time_days: 12
    inputs: { iron_ingots: 8, lumber: 15, leather: 5, nails: 5 }
    durability_uses: 300
    maintenance_per_season: { grain: 20, vegetables: 10 }
    effects:
      farm_yield_bonus: 2.00
      farm_area_bonus: 3.00
      required_for_operations: [large_farm_operation]

  mill_wheel:
    kind: equipment
    build_time_days: 10
    inputs: { lumber: 40, iron_ingots: 10, nails: 15 }
    durability_uses: 800
    effects:
      required_for_facilities: [grain_mill]
      recipe_speed_bonus: { flour_from_grain: 1.00 }

  fishing_boat:
    kind: equipment
    build_time_days: 14
    inputs: { lumber: 25, nails: 8, cloth: 5, leather: 2 }
    durability_uses: 400
    effects:
      fish_gather_rate_bonus: 1.50
      enables_deep_water_fishing: true
      capacity_workers: 2

  hand_cart:
    kind: equipment
    build_time_days: 3
    inputs: { lumber: 8, iron_ingots: 2, nails: 4 }
    durability_uses: 200
    effects:
      carry_capacity_bonus: 0.50
      travel_speed_bonus: 0.10

  forge_anvil:
    kind: equipment
    build_time_days: 5
    inputs: { iron_ingots: 20, stone_blocks: 10 }
    durability_uses: 9999
    effects:
      required_for_facilities: [blacksmith]
      recipe_quality_bonus: { tools: 1 }

  loom_floor:
    kind: equipment
    build_time_days: 7
    inputs: { lumber: 15, iron_ingots: 3, nails: 6 }
    durability_uses: 600
    effects:
      required_for_recipes: [cloth_fine_from_fiber]   # placeholder unless defined
      recipe_speed_bonus: { cloth_from_fiber: 0.50 }

  press_olive:
    kind: equipment
    build_time_days: 8
    inputs: { lumber: 20, stone_blocks: 15, iron_ingots: 4 }
    durability_uses: 700
    effects:
      enables_recipes: [oil_from_olives, wine_from_grapes] # placeholders unless defined

  miner_pickaxe_set:
    kind: equipment
    build_time_days: 2
    inputs: { iron_ingots: 5, lumber: 3, leather: 2 }
    durability_uses: 150
    effects:
      ore_gather_rate_bonus: 0.80
      stone_gather_rate_bonus: 0.60
      required_per_miner: 1
